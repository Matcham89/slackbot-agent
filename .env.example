# ============================================================================
# Kagent Slack Bot Configuration
# ============================================================================
# This file contains NON-SENSITIVE configuration only.
# DO NOT put actual tokens or secrets here!
#
# For local development:
#   1. Copy this file: cp .env.example .env
#   2. Edit .env with your configuration
#   3. Set secrets as environment variables (see below)
#
# For production (Kubernetes):
#   - Configuration: Set via ConfigMap or deployment env vars
#   - Secrets: Set via Kubernetes Secrets (NEVER in .env files)
#
# Security Note:
#   - .env is in .gitignore and should NEVER be committed
#   - Secrets should be loaded from environment variables only
# ============================================================================

# ============================================================================
# DEPLOYMENT MODE
# ============================================================================
# Set to "true" for multi-cluster routing, "false" for single-cluster
ENABLE_MULTI_CLUSTER=false

# ============================================================================
# SINGLE-CLUSTER CONFIGURATION (when ENABLE_MULTI_CLUSTER=false)
# ============================================================================
# Option 1: Full A2A URL (recommended for clarity)
KAGENT_A2A_URL=http://localhost:8083/api/a2a/kagent/k8s-agent

# Option 2: Separate components (alternative to KAGENT_A2A_URL)
# KAGENT_BASE_URL=http://localhost:8083
# KAGENT_NAMESPACE=kagent
# KAGENT_AGENT_NAME=k8s-agent

# For Kubernetes deployment (bot runs inside cluster):
# KAGENT_A2A_URL=http://kagent-controller.kagent.svc.cluster.local:8083/api/a2a/kagent/k8s-agent

# ============================================================================
# MULTI-CLUSTER CONFIGURATION (when ENABLE_MULTI_CLUSTER=true)
# ============================================================================
# Uncomment and configure for multi-cluster mode:

# List of clusters (comma-separated, used for keyword detection)
# KAGENT_CLUSTERS=test,dev,prod

# Default cluster when no keyword detected in message
# KAGENT_DEFAULT_CLUSTER=test

# Kagent namespace (must be same across all clusters)
# KAGENT_NAMESPACE=kagent

# Agent name pattern (same across all clusters)
# KAGENT_AGENT_PATTERN=k8s-agent

# Cluster endpoints (via AgentGateway on port 8080)
# KAGENT_TEST_BASE_URL=http://192.168.1.200:8080
# KAGENT_DEV_BASE_URL=http://192.168.1.201:8080
# KAGENT_PROD_BASE_URL=http://192.168.1.202:8080

# Optional: Custom aliases for cluster detection (comma-separated)
# KAGENT_TEST_ALIASES=testing,tst,test-cluster
# KAGENT_DEV_ALIASES=development,develop,dev-cluster
# KAGENT_PROD_ALIASES=production,prd,prod-cluster

# ============================================================================
# OPERATIONAL SETTINGS
# ============================================================================
# Request timeout in seconds (default: 300 = 5 minutes)
REQUEST_TIMEOUT=300

# Maximum context tokens before warning user (default: 300000)
# OpenAI limit is ~400k, we use 300k for safety margin
MAX_CONTEXT_TOKENS=300000

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# ============================================================================
# SECRETS (DO NOT SET HERE - USE ENVIRONMENT VARIABLES)
# ============================================================================
# These MUST be set as environment variables, NOT in this file!
#
# For local development, export them in your shell:
#   export SLACK_BOT_TOKEN="xoxb-your-actual-token"
#   export SLACK_APP_TOKEN="xapp-your-actual-token"
#
# For production (Kubernetes), use Kubernetes Secrets:
#   kubectl create secret generic slack-credentials \
#     --from-literal=bot-token='xoxb-...' \
#     --from-literal=app-token='xapp-...' \
#     --namespace=kagent
#
# Required secrets:
#   SLACK_BOT_TOKEN   - Slack bot user OAuth token (starts with xoxb-)
#   SLACK_APP_TOKEN   - Slack app-level token (starts with xapp-)
#
# Optional secrets (for Cloudflare Access):
#   CF_ACCESS_CLIENT_ID
#   CF_ACCESS_CLIENT_SECRET
#
# ⚠️ NEVER commit actual tokens to git!
# ⚠️ NEVER put tokens in .env files that might be shared!
# ============================================================================

# ============================================================================
# GETTING SLACK TOKENS
# ============================================================================
# 1. Go to https://api.slack.com/apps
# 2. Create New App → From scratch
# 3. Name it "kagent" and select your workspace
# 4. Socket Mode:
#    - Enable Socket Mode
#    - Create app-level token with 'connections:write' scope
#    - Copy token (xapp-...) → Set as SLACK_APP_TOKEN
# 5. OAuth & Permissions:
#    - Add Bot Token Scopes: app_mentions:read, chat:write, channels:history
#    - Install App to Workspace
#    - Copy Bot User OAuth Token (xoxb-...) → Set as SLACK_BOT_TOKEN
# 6. Event Subscriptions:
#    - Enable Events
#    - Subscribe to 'app_mention' bot event
# ============================================================================

# ============================================================================
# EXAMPLES
# ============================================================================
# Example 1: Local development with port-forward
#   ENABLE_MULTI_CLUSTER=false
#   KAGENT_A2A_URL=http://localhost:8083/api/a2a/kagent/k8s-agent
#   LOG_LEVEL=DEBUG
#
# Example 2: Kubernetes deployment (single-cluster)
#   ENABLE_MULTI_CLUSTER=false
#   KAGENT_A2A_URL=http://kagent-controller.kagent.svc.cluster.local:8083/api/a2a/kagent/k8s-agent
#
# Example 3: Multi-cluster via AgentGateway
#   ENABLE_MULTI_CLUSTER=true
#   KAGENT_CLUSTERS=test,dev,prod
#   KAGENT_DEFAULT_CLUSTER=test
#   KAGENT_NAMESPACE=kagent
#   KAGENT_AGENT_PATTERN=k8s-agent
#   KAGENT_TEST_BASE_URL=http://192.168.1.200:8080
#   KAGENT_DEV_BASE_URL=http://192.168.1.201:8080
#   KAGENT_PROD_BASE_URL=http://192.168.1.202:8080
# ============================================================================
